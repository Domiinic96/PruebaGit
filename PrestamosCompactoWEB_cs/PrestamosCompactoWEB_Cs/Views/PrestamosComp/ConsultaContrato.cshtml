@model PrestamosCompactoWEB_Cs.Models.ConsultaContrato

@{
    ViewBag.Title = "Consulta Préstamo/Emite Recibo de Pago";
}

<style>
    .block {
        display: block;
    }

    .inline {
        display: inline-block;
    }

    .sizedoc {
        width: 150px;
    }

    .textarea {
        width: 50px;
    }

    .Sizedocc {
        height: 75px;
        max-width: 610px;
    }

    .Pos {
        position: absolute;
        left: 55px;
        top: 145px;
    }

    .Pos2 {
        position: absolute;
        left: 60px;
        top: 200px;
    }

    .Pos3 {
        position: absolute;
        left: 144px;
        top: 195px;
    }

    .Pos4 {
        position: absolute;
        left: 270px;
        top: 195px;
    }

    .Pos5 {
        position: absolute;
        left: 330px;
        top: 200px;
    }

    .Pos6 {
        position: absolute;
        left: 380px;
        top: 195px;
    }

    .Pos7 {
        position: absolute;
        left: 70px;
        top: 240px;
    }



    .Pos8 {
        position: absolute;
        left: 143px;
        top: 238px;
    }

    .Pos9 {
        position: absolute;
        left: 560px;
        top: 245px;
    }

    .Pos10 {
        position: absolute;
        left: 603px;
        top: 240px;
    }

    .Pos11 {
        position: absolute;
        left: 70px;
        top: 290px;
    }

    .Pos12 {
        position: absolute;
        left: 143px;
        top: 285px;
    }

    .Pos15 {
        position: absolute;
        left: 10px;
        top: 5px;
    }

    .Pos16 {
        position: absolute;
        left: 30px;
        top: 5px;
    }

    .Pos17 {
        position: absolute;
        left: 105px;
        top: 5px;
    }

    .Pos18 {
        position: absolute;
        left: 110px;
        top: 5px;
    }

    .Pos19 {
        position: absolute;
        left: -85px;
        top: 5px;
    }



    .Pos20 {
        position: absolute;
        left: 70px;
        top: 375px;
    }

    .Pos21 {
        position: absolute;
        left: 143px;
        top: 370px;
    }

    .Pos22 {
        position: absolute;
        left: 35px;
        top: 423px;
    }

    .Pos23 {
        position: absolute;
        left: 143px;
        top: 415px;
    }

    .Pos24 {
        position: absolute;
        left: 70px;
        top: 455px;
    }

    .Pos25 {
        position: absolute;
        left: 360px;
        top: 415px;
    }

    .Pos26 {
        position: absolute;
        left: 395px;
        top: 365px;
    }

    .Pos27 {
        position: absolute;
        left: 300px;
        top: 550px;
    }

    .Pos28 {
        position: absolute;
        left: -120px;
        top: 4px;
    }

    .Pos29 {
        position: absolute;
        left: 10px;
        top: 5px;
    }


    .Pos30 {
        position: absolute;
        left: 145px;
        top: 150px;
    }

    .Pos31 {
        position: absolute;
        left: 85px;
        top: 160px;
    }

    .Pos32 {
        position: absolute;
        left: 20px;
        top: 635px;
    }

    .Pos33 {
        position: absolute;
        left: 100px;
        top: 610px;
    }

    .Pos34 {
        position: absolute;
        left: 40px;
        top: 205px;
    }

    .Pos35 {
        position: absolute;
        left: 145px;
        top: 200px;
    }

    .Pos36 {
        position: absolute;
        left: 298px;
        top: 150px;
    }

    .Pos37 {
        position: absolute;
        left: 120px;
        top: 5px;
    }

    .Pos38 {
        position: absolute;
        left: 340px;
        top: 150px;
    }

    .Pos39 {
        position: absolute;
        left: 250px;
        top: 250px;
    }


    .Pos40 {
        position: absolute;
        left: 15px;
        top: 500px;
    }

    .Pos41 {
        position: absolute;
        left: 30px;
        top: 5px;
    }

    .Pos42 {
        position: absolute;
        left: 80px;
        top: 5px;
    }

    .Pos43 {
        position: absolute;
        left: 65px;
        top: 5px;
    }

    .Pos44 {
        position: absolute;
        left: 360px;
        top: 40px;
    }

    .Pos45 {
        position: absolute;
        left: 25px;
        top: 10px;
    }

    .Pos46 {
        position: absolute;
        left: 155px;
        top: 10px;
    }

    .Pos47 {
        position: absolute;
        left: 305px;
        top: 10px;
    }

    .Pos48 {
        position: absolute;
        left: 440px;
        top: 10px;
    }

    .Pos49 {
        position: absolute;
        left: 590px;
        top: 10px;
    }

    .Pos50 {
        position: absolute;
        left: 740px;
        top: 10px;
    }

    .Pos51 {
        position: absolute;
        left: 10px;
        top: 115px;
    }

    .Pos52 {
        position: absolute;
        left: 140px;
        top: 115px;
    }

    .Pos53 {
        position: absolute;
        left: 290px;
        top: 115px;
    }

    .Pos54 {
        position: absolute;
        left: 440px;
        top: 115px;
    }

    .Pos55 {
        position: absolute;
        left: 590px;
        top: 115px;
    }

    .Pos56 {
        position: absolute;
        left: 740px;
        top: 115px;
    }

    .Pos57 {
        position: absolute;
        left: 60px;
        top: 550px;
    }

    .Pos58 {
        position: absolute;
        left: 40px;
        top: 573px;
    }

    .Pos59 {
        position: absolute;
        left: 55px;
        top: 595px;
    }

    .Pos60 {
        position: absolute;
        left: 60px;
        top: 660px;
    }

    .Pos61 {
        position: absolute;
        left: 40px;
        top: 685px;
    }

    .Pos62 {
        position: absolute;
        left: 55px;
        top: 710px;
    }

    .Pos63 {
        position: absolute;
        left: 5px;
        top: 30px;
    }

    .Pos64 {
        position: absolute;
        left: 5px;
        top: 55px;
    }

    .Pos65 {
        position: absolute;
        left: 5px;
        top: 80px;
    }

    .Pos66 {
        position: absolute;
        left: 145px;
        top: 30px;
    }

    .Pos67 {
        position: absolute;
        left: 145px;
        top: 55px;
    }

    .Pos68 {
        position: absolute;
        left: 145px;
        top: 80px;
    }

    .Pos69 {
        position: absolute;
        left: 290px;
        top: 30px;
    }

    .Pos70 {
        position: absolute;
        left: 290px;
        top: 55px;
    }

    .Pos71 {
        position: absolute;
        left: 290px;
        top: 80px;
    }

    .Pos72 {
        position: absolute;
        left: 435px;
        top: 30px;
    }

    .Pos73 {
        position: absolute;
        left: 435px;
        top: 55px;
    }

    .Pos74 {
        position: absolute;
        left: 435px;
        top: 80px;
    }

    .Pos75 {
        position: absolute;
        left: 585px;
        top: 30px;
    }

    .Pos76 {
        position: absolute;
        left: 585px;
        top: 55px;
    }

    .Pos77 {
        position: absolute;
        left: 585px;
        top: 80px;
    }

    .Pos78 {
        position: absolute;
        left: 730px;
        top: 30px;
    }

    .Pos79 {
        position: absolute;
        left: 730px;
        top: 55px;
    }

    .Pos80 {
        position: absolute;
        left: 730px;
        top: 80px;
    }

    .Pos81 {
        position: absolute;
        left: 5px;
        top: 195px;
    }

    .Pos82 {
        position: absolute;
        left: 5px;
        top: 145px;
    }

    .Pos83 {
        position: absolute;
        left: 5px;
        top: 170px;
    }

    .Pos84 {
        position: absolute;
        left: 145px;
        top: 195px;
    }

    .Pos85 {
        position: absolute;
        left: 145px;
        top: 145px;
    }

    .Pos86 {
        position: absolute;
        left: 145px;
        top: 170px;
    }

    .Pos87 {
        position: absolute;
        left: 290px;
        top: 195px;
    }

    .Pos88 {
        position: absolute;
        left: 290px;
        top: 145px;
    }

    .Pos89 {
        position: absolute;
        left: 290px;
        top: 170px;
    }

    .Pos90 {
        position: absolute;
        left: 435px;
        top: 195px;
    }

    .Pos91 {
        position: absolute;
        left: 435px;
        top: 145px;
    }

    .Pos92 {
        position: absolute;
        left: 435px;
        top: 170px;
    }

    .Pos93 {
        position: absolute;
        left: 585px;
        top: 195px;
    }

    .Pos94 {
        position: absolute;
        left: 585px;
        top: 145px;
    }

    .Pos95 {
        position: absolute;
        left: 585px;
        top: 170px;
    }

    .Pos96 {
        position: absolute;
        left: 730px;
        top: 195px;
    }

    .Pos97 {
        position: absolute;
        left: 730px;
        top: 145px;
    }

    .Pos98 {
        position: absolute;
        left: 730px;
        top: 170px;
    }

    .Pos99 {
        position: absolute;
        left: 350px;
        top: 150px;
    }

    .divp {
        position: fixed;
    }

    .fieldset1 {
        display: block;
        margin-left: 2px;
        margin-right: 2px;
        padding-bottom: 0.625em;
        padding-left: 6.75em;
        padding-right: 6.75em;
        border: 2px groove;
        border-color: #ffffff;
        width: 20px;
        height: 35px;
        position: absolute;
        top: 150px;
        left: 142px;
        font-size-adjust: initial;
    }

    .Post1 {
        position: absolute;
        left: 208px;
        top: -15px;
    }

    .Post2 {
        position: absolute;
        left: 270px;
        top: -20px;
    }

    .Post3 {
        position: absolute;
        left: 575px;
        top: -15px;
    }

    .Post4 {
        position: absolute;
        left: 630px;
        top: -20px;
    }

    .Post5 {
        position: absolute;
        left: 894px;
        top: -15px;
    }

    .Post6 {
        position: absolute;
        left: 950px;
        top: -20px;
    }

    .Divpo {
        position: absolute;
        top: 28px;
    }

     .Divpos {
position: absolute;
left: 70px;
top: 93px;
    }

    .Color {
        color: #36C197;
    }

    .ui-datepicker-trigger {
        position: absolute;
        top: 194px;
        width: 38px;
        left: 508px;
    }
</style>

<style>
        /*div {
        background:red;
    }*/

        label {
            color: #38c197;
        }

           hr{
            border: 0.5px solid #dddddd;
        }

            /* Style the tab */
    div.tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

        /* Style the buttons inside the tab */
        div.tab a {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
            text-decoration:none;
            color: #000000;
        }

            /* Change background color of buttons on hover */
            div.tab a:hover {
                background-color: #ddd;
            }

            /* Create an active/current tablink class */
            div.tab a.active {
                background-color: #ccc;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

</style>

<div class="Divpos">
    <h4> <b class="Color Title">Consulta Negociacion/Emite Recibo de Pago</b></h4>
</div>
<br>

@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()

    <div class="container form-horizontal panel panel-default" style="margin-top: 112px;">

        <br />

        <div class="modal fade" id="ModalPrestamo" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">

            <div class="modal-dialog modal-dialog-centered" role="document" style="width:80%;">

                <!--Contenedor del popup-->
                <div class="modal-content">

                    <!--Titulo y boton de cierre del popup-->
                    <div class="modal-header">

                        <!--Ojo... En este h4, se puede usar una variable como parametro para llamar la tabla a visualizar??-->
                        <h4 class="modal-title" id="exampleModalLongTitle">Titulo de la Tabla</h4>

                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: -20px;">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <!--/////////////////-->
                    <!--Cuerpo del popup donde va la tabla-->
                    <div class="modal-body">

                        @*<table id="Tabla" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">*@
                        <table id="example" class="table table-bordered dt-responsive nowrap" style="width:100%">
                            <thead>
                                <tr>
                                    <th>
                                        <label class="control-label">Contrato</label>
                                    </th>
                                    <th>
                                        <label class="control-label">Nombre Cliente</label>
                                    </th>
                                    <th>
                                        <label class="control-label">Apellido Cliente</label>
                                    </th>
                                    <th>
                                        <label class="control-label">Fecha</label>
                                    </th>
                                    <th>
                                        <label class="control-label">Monto Préstamo</label>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @if ((IEnumerable<PrestamosCompactoWEB_Cs.Models.Select_ListadoContratos>)ViewBag.ModelNPrestamo != null && (IEnumerable<PrestamosCompactoWEB_Cs.Models.Select_ListadoContratos>)ViewBag.ModelNPrestamo != null)
                                {
                                    foreach (var item in (IEnumerable<PrestamosCompactoWEB_Cs.Models.Select_ListadoContratos>)ViewBag.ModelNPrestamo)
                                    {

                                        <tr>
                                            <td style="cursor:pointer">
                                                @Html.DisplayFor(modelItem => item.Contrato)
                                            </td>
                                            <td style="cursor:pointer">
                                                @Html.DisplayFor(modelItem => item.NomClteApls)
                                            </td>
                                            <td style="cursor:pointer">
                                                @Html.DisplayFor(modelItem => item.ApeClteApls)
                                            </td>
                                            <td style="cursor:pointer">
                                                @Html.DisplayFor(modelItem => item.FechaPtm)
                                            </td>
                                            <td style="cursor:pointer">
                                                @Html.DisplayFor(modelItem => item.MontoPtm)
                                            </td>
                                            @*<td>
                                                @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
                                                @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
                                                @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
                                            </td>*@
                                        </tr>

                                    }
                                }

                            </tbody>
                        </table>

                    </div>
                    <!--//////////////////////////////////-->
                    <!--Botones del pie del popup-->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="CerrarModal">Close</button>
                        @*<button type="button" class="btn btn-primary">Save changes</button>*@
                    </div>
                    <!--//////////////////////////-->

                </div>
                <!--/////////////////////////-->
            </div>
        </div>

        <div class="row">

            <label class="col-md-2  control-label">No. de la Negociación</label>

            <div class="col-md-3" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.NoPrestamo, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%;", @Id="NoPrestamo", @ReadOnly = true } })

                @*<div class="input-group">

                        <div class="input-group">
                            <input type="text" class="form-control" name="nombre" />
                            <span class="input-group-addon" style="background-color: #36C197; color: white; font-weight: bold;">...</span>
                        </div>

                    </div>*@

            </div>

            <div class="col-md-1" style="margin-left: -72px;">

                @*<input type="button" name="Registrar" value="..." style="background-color:#36C197;color:white;font-weight:bold" class="waves-effect waves-light btn">*@

                <input type="button" name="Registrar" value="..." data-toggle="modal" data-target="#ModalPrestamo" style="background-color:#36C197;color:white;font-weight:bold" class="waves-effect waves-light btn">

            </div>

            <div class="col-md-6"></div>

        </div>

        <br />

        <div class="row">

            <label class="col-md-2  control-label">Cédula del Cliente</label>

            <div class="col-md-3" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.CedulaCliente, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%;", @ReadOnly = true, @Id = "CedulaoRNC" } })

            </div>

            <div class="col-md-7"></div>

        </div>

        <br />

        <div class="row">
            <label class="col-md-2  control-label">Nombre del Cliente</label>
            
            <div class="col-md-2"></div>


            <div class="col-md-10" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="max-width: 64%;" />*@

                @Html.EditorFor(model => model.NombreCliente, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%; max-width: 70%;", @ReadOnly = true, @Id= "NombreApellido" } })

            </div>

        </div>


        <br />

        <div class="row">

            <label class="col-md-2  control-label">Fecha de la Negociación</label>

            <div class="col-md-3" style="margin-left:-15px;">   

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.FechaPrestamo, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 51%; max-width: 64%;", @Placeholder = "DD/MM/YYYY", @Onkeyup = "this.value=formateafecha(this.value,'" + ViewBag.ModelFecha + "')", @ReadOnly = true } })

            </div>

            <div class="col-md-7"></div>

        </div>

        <br />

        <div class="row">

            <label class="col-md-2  control-label">Monto de la Negociación</label>

            <div class="col-md-2" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.MontoPrestamo, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%; text-align: right;", @placeholder = "0.00", @ReadOnly = true, @Id= "MontoPrestamo" } })

            </div>

            <label class="col-md-1  control-label" style="text-indent: -21px;">Tasa Interes</label>

            <div class="col-md-2" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.TasaInteres, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%; text-align: right;", @placeholder = "0.00", @ReadOnly = true } })

            </div>

            <label class="col-md-2  control-label">Fecha de la Consulta</label>

            <div class="col-md-3" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.FechaConsulta, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 51%;", @Placeholder = "DD/MM/YYYY",  @ReadOnly = true, @Onkeyup = "this.value=formateafecha(this.value,'" + ViewBag.ModelFecha + "')", @Id= "FechaConsulta", } })

            </div>

            <div class="col-md-1"></div>

        </div>

        <br />

        <div class="row">

            <label class="col-md-2  control-label">No. Cuotas</label>

            <div class="col-md-2" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.NoCuotas, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%; max-width: 64%; text-align: right;", @placeholder = "0", @ReadOnly = true, @Id = "NoCuotas" } })

            </div>

            <div class="col-md-5">

            </div>

            <div class="col-md-1" style="margin-left: -72px;">

                <input type="button" name="CambiarFecha"  onclick="DebloqueaFecha();" value="Cambiar Fecha" style="background-color:#36C197;color:white;font-weight:bold;margin-left: 43px;" class="waves-effect waves-light btn">

            </div>

            <div class="col-md-1">

            </div>

        </div>

        <br />

        <div class="row">

            <label class="col-md-2  control-label">Cobrador Asignado</label>

            <div class="col-md-3" style="margin-left:-15px;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.CodigoCobradorAsignado, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 23%; max-width: 64%;", @ReadOnly = true, @ID= "CodigoCobradorAsignado" } })

            </div>

            <div class="col-md-6" style="margin-left:-215PX;">

                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                @Html.EditorFor(model => model.NombreCobradorAsignado, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 51%; max-width: 74%;", @ReadOnly = true, @Id="NombreCobradorAsignado" } })

            </div>

            <div class="col-md-4"></div>

        </div>

        <hr />
        <br />

        <div class="row">

            <div class="col-md-12">

                <div class="tab">
                    <a class="tablinks" onclick="openCity(event, 'Generales')" id="defaultOpen">Generales</a>
                    <a class="tablinks" onclick="openCity(event, 'CuotasVencidas')">Cuotas Vencidas</a>
                    <a class="tablinks" onclick="openCity(event, 'CalculoMora')">Cálculo Mora</a>
                    <a class="tablinks" onclick="openCity(event, 'DatosCliente')">Datos Cliente</a>
                    <a class="tablinks" onclick="openCity(event, 'Movimiento')">Movimiento</a>
                    <a class="tablinks" onclick="openCity(event, 'VerTabla')">Ver Tabla</a>

                </div>

                <div id="Generales" class="tabcontent">
                    <div class="col-md-12">
                    </div>
                </div>

                <div id="CuotasVencidas" class="tabcontent">
                    <div class="col-md-12">
                        <Table border="0" id="tblCuotasVencidas" style="width:91%" Class="table table-striped table-bordered dt-responsive nowrap">

                            <thead>
                                <tr>

                                    <th style="width:9%;color:#36C197">
                                        <Center>Cuota</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Capital</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Interes</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Otros</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Total</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Fecha</Center>
                                    </th>

                                </tr>
                            </thead>
                            <tbody>
                                @*@for (int C = 1; C <= 2; C++)
                                {
                                    <tr>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>

                                    </tr>

                                }*@

                        </Table>
                    </div>
                </div>

                <div id="CalculoMora" class="tabcontent">
                    <div class="col-md-12">
                        <Table border="0" id="tblCalculoMora" style="width:91%" Class="table table-striped table-bordered dt-responsive nowrap">

                            <thead>
                                <tr>

                                    <th style="width:9%;color:#36C197">
                                        <Center>Cuota</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Fecha</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Valor</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Días</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Cálculo</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Tasa Anual%</Center>
                                    </th>

                                </tr>
                            </thead>
                            <tbody>
                                @*@for (int C = 1; C <= 2; C++)
                                {
                                    <tr>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>

                                    </tr>

                                }*@

                        </Table>
                    </div>
                </div>

                <div id="DatosCliente" class="tabcontent">
                    <div class="col-md-12">

                        <br />

                        <div class="row">

                            <label class="col-md-2  control-label">Cédula o RNC</label>

                            <div class="col-md-3" style="margin-left:-15px;">

                                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                                @Html.EditorFor(model => model.CedulaoRNC, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%;", @Id= "CedulaoRNCC", @ReadOnly = true } })

                            </div>

                            <label class="col-md-1  control-label">Código</label>


                            <div class="col-md-3" style="margin-left:-15px;">
                                @*<input type="text" class="form-control" name="codigo" style="width: 80%;" />*@

                                @Html.EditorFor(model => model.Codigo, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%;", @Id= "CodigoC", @ReadOnly = true } })

                            </div>


                            <div class="col-md-3"></div>

                        </div>

                        <br />

                        <div class="row">

                            <label class="col-md-2  control-label">Nombre</label>

                            <div class="col-md-3" style="margin-left:-15px;">

                                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                                @Html.EditorFor(model => model.NombreCliente, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 233%; max-width: 238%", @Id = "NombreApellidoC",  @ReadOnly = true } })

                            </div>

                            @*<label class="col-md-1  control-label">Apellido</label>*@


                            <div class="col-md-3" style="margin-left:-15px;">
                                @*<input type="text" class="form-control" name="codigo" style="width: 80%;" />*@

                                @*@Html.EditorFor(model => model.ApellidoCliente, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%;",  } })*@
                            </div>


                            <div class="col-md-3"></div>

                        </div>

                        <br />

                        <div class="row">

                            <label class="col-md-2  control-label">Nombre del Negocio</label>

                            <div class="col-md-10" style="margin-left:-15px;">

                                @*<input type="text" class="form-control" name="nombre" style="max-width: 64%;" />*@

                                @Html.EditorFor(model => model.NombreNegocio, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%; max-width: 64%;", @Id = "NombreNegocioC", @ReadOnly = true } })

                            </div>

                            @*<div class="col-md-2"></div>*@

                        </div>


                        <br />

                        <div class="row">

                            <label class="col-md-2  control-label">Direccion del Cobro</label>

                            <div class="col-md-10" style="margin-left:-15px;">

                                @*<input type="text" class="form-control" name="nombre" style="max-width: 64%;" />*@

                                @Html.EditorFor(model => model.DireccionCobro, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%; max-width: 64%;", @Id = "DireccionCobroC", @ReadOnly = true } })

                            </div>

                            @*<div class="col-md-7"></div>*@

                        </div>

                        <br />

                        <div class="row">

                            <label class="col-md-2  control-label">Teléfono</label>

                            <div class="col-md-3" style="margin-left:-15px;">

                                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                                @Html.EditorFor(model => model.Telefono, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%;", @Id= "Telefono", @ReadOnly = true } })

                            </div>

                            <div class="col-md-7"></div>

                        </div>

                        <br />

                        <div class="row">

                            <label class="col-md-2  control-label">Celular</label>

                            <div class="col-md-3" style="margin-left:-15px;">

                                @*<input type="text" class="form-control" name="nombre" style="width: 80%;" />*@

                                @Html.EditorFor(model => model.Celular, new { @htmlAttributes = new { @class = "form-control inline sizedoc", @style = "width: 80%;", @Id="Celular", @ReadOnly = true } })
                            </div>

                            <div class="col-md-7"></div>

                        </div>

                        <br />
                    </div>
                </div>

                <div id="Movimiento" class="tabcontent">
                    <div class="col-md-12">
                        <Table border="0" id="tblMovimientos" style="width:91%" Class="table table-striped table-bordered dt-responsive nowrap">

                            <thead>
                                <tr>

                                    <th style="width:9%;color:#36C197">
                                        <Center>Fecha</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Documento</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Movimiento</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Capital</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Interes</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Otros</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Mora</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Total</Center>
                                    </th>

                                </tr>
                            </thead>
                            <tbody>
                                @*@for (int C = 1; C <= 2; C++)
                                {
                                    <tr>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                    </tr>

                                }*@

                        </Table>
                    </div>
                </div>

                <div id="VerTabla" class="tabcontent">
                    <div class="col-md-12">
                        <Table border="0" id="tblCuotas" style="width:91%" Class="table table-striped table-bordered dt-responsive nowrap">

                            <thead>
                                <tr>

                                    <th style="width:9%;color:#36C197">
                                        <Center>Cuota</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Fecha</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Saldo</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Valor Cuota</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Capital</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Interes</Center>
                                    </th>

                                    <th Style="width:9%;color:#36C197">
                                        <Center>Otros</Center>
                                    </th>

                                </tr>
                            </thead>
                            <tbody>
                                @*@for (int C = 1; C <= 2; C++)
                                {
                                    <tr>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                        <td>
                                            <Center>.</Center>
                                        </td>
                                    </tr>

                                }*@

                        </Table>
                    </div>
                </div>

            </div>

        </div>

        <br />
        <hr />

        <div class="row">

            <div class="col-md-2">

            </div>

            <div class="col-md-1">

                @*<input type="button" name="Registrar" Value="Limpiar" style="background-color:#36C197;color:white;font-weight:bold;width: 85px;margin-left: 21px;" class="waves-effect waves-light btn">*@

                <input type="reset" name="Cancelar" Value="Limpiar" onclick="location.href='@Url.Action("ConsultaContrato", "PrestamosComp")'" style="background-color:#36C197;color:white;font-weight:bold;width: 85px;margin-left: 21px;" class="waves-effect waves-light btn">

            </div>

            <div class="col-md-1">

                @*<input type="button" name="Registrar" value="Salir" style="background-color:#36C197;color:white;font-weight:bold;width: 85px;margin-left: 17px;" class="waves-effect waves-light7 btn">*@

                @*<input type="submit" name="Salir" value="Salir" onclick="location.href='@Url.Action("PRSC_Index", "PrestamosComp")'" style="background-color:#36C197;color:white;font-weight:bold;width: 85px;margin-left: 17px;" class="waves-effect waves-light btn">*@

            </div>

            <div class="col-md-1">

               @* <input type="button" name="Registrar" value="Imprimir" style="background-color:#36C197;color:white;font-weight:bold;margin-left: 16px;" class="waves-effect waves-light btn">*@

            </div>

            <div class="col-md-7"></div>

        </div>

        <hr />
        <br />

    </div>

   
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/DateValidator.js"></script>
    @*<link rel="stylesheet" type="text/css" href="~/Content/Styl10.css" />*@
  @*  <link rel="stylesheet" type="text/css" href="~/Content/Styl5.css" />*@
    <link type="text/css" href="~/Content/jquery-ui.theme.css" rel="Stylesheet" />
    <link type="text/css" href="~/Content/jquery-ui.structure.min.css" rel="Stylesheet" />
    @*<script type="text/javascript" src="~/Scripts/jquery-ui.js"></script>*@
    <script type="text/javascript" src="~/Scripts/jquery-ui.min.js"></script>
    <Scripts src="~/Scripts/jquery.unobtrusive-ajax.min.js"></Scripts>
    <script src="~/Scripts/jquery-1.8.2.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.8.24.min.js"></script>
 
    <script src="@Url.Content("../../Scripts/jquery.dataTables.min.js")"></script>
    <script src="@Url.Content("../../Scripts/dataTables.bootstrap.min.js")"></script>
    <script src="@Url.Content("../../Scripts/dataTables.responsive.min.js")"></script>
    <script src="@Url.Content("../../Scripts/responsive.bootstrap.min.js")"></script>

<script type="text/javascript">
        $(document).ready(function () {
            $("#tabla").DataTable({
                "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                "info": false,
                "sort": false
            });
        });
</script>
        }


<script>
    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();
</script>

<script>
        $(function ($) {
            $.datepicker.regional['es'] = {
                closeText: 'Cerrar',
                prevText: '<Ant',
                nextText: 'Sig>',
                currentText: 'Hoy',
                monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
                dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mié', 'Juv', 'Vie', 'Sáb'],
                dayNamesMin: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sá'],
                weekHeader: 'Sm',
                dateFormat: 'dd/mm/yy',
                firstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: ''
            };
            $.datepicker.setDefaults($.datepicker.regional['es']);
        });
</script>

<script>

    $('#CambiarFecha').click(function () {
        $('#FechaConsulta').attr('ReadAOnly', false);
        $('#FechaConsulta').focus();
        //$('#Actualizar').prop('disabled', false);
    });

   

    function stopRKey(evt) {
        var evt = (evt) ? evt : ((event) ? event : null);
        var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);

        if ((evt.keyCode == 13) && ((node.type == "text") || (node.type == "radio") || (node.type == "checkbox"))) { return false; }
    }

    document.onkeypress = stopRKey;

</script>
<script type="text/javascript">
        //$(document).ready(function () {
        //    $("#tabla").DataTable({
        //        "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
        //        "info": false,
        //        "sort": false
        //    });
        //    $("#tabla1").DataTable({
        //        "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
        //        "info": false,
        //        "sort": false
        //    });
        //    $("#tabla2").DataTable({
        //        "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
        //        "info": false,
        //        "sort": false
        //    });
        //});



        $(document).ready(function () {
            var selected = [];
            var cedula = "";

            $("#example").DataTable({
                //"language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                "processing": true,
                "rowCallback": function (row, data) {
                    if ($.inArray(data.DT_RowId, selected) !== -1) {
                        $(row).addClass('selected');
                    }
                }
            });
            function convertDate(inputFormat) {
                function pad(s) { return (s < 10) ? '0' + s : s; }
                var d = new Date(inputFormat);
                return [pad(d.getDate()), pad(d.getMonth() + 1), d.getFullYear()].join('/');
            }

            function ToJavaScriptDate(value) {

                var pattern = /Date\(([^)]+)\)/;
                var results = pattern.exec(value);
                var dt = new Date(parseFloat(results[1]));
                return ((dt.getDate() < 10) ? '0' + dt.getDate() : dt.getDate()) + '/' + (((dt.getMonth() + 1) < 10) ? '0' + (dt.getMonth() + 1) : (dt.getMonth() + 1)) + '/' + dt.getFullYear();
            }

            
            $('#example tbody').on('dblclick', 'tr', function () {
                var id = this.id;
                var index = $.inArray(id, selected);
               // alert("ENTRAMOS")
                if (index === -1) {
                    selected.push(id);
                } else {
                    selected.splice(index, 1);
                }

                $(this).toggleClass('selected');
               
                var dato1 = $(this).find('td:nth-child(1)').html();
                $('#NoPrestamo').val(dato1.trim());
                NoPrestamo = dato1.trim();

                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("GetConsultaContrato")',
                    dataType: 'json',
                    data: { Contrato: NoPrestamo },
                    success: function (data) {

                        $.each(data, function (i, res) {

                            $('#NoPrestamo').val(res[0].NoPrestamo);
                            $('#CedulaoRNC').val(res[0].CedulaCliente);
                            $('#NombreApellido').val(res[0].NombreApellido);
                            $('#MontoPrestamo').val(formatCurrency(res[0].MontoPrestamo));
                            $('#FechaPrestamo').val(res[0].FechaPrestamo);
                            $('#FechaConsulta').val(res[0].FechaConsulta);
                            $('#TasaInteres').val(res[0].TasaInteres);
                            $('#NoCuotas').val(res[0].NoCuotas);
                            $('#DireccionCobro').val(res[0].DireccionCobro);
                            $('#CodigoCobradorAsignado').val(res[0].CodigoCobradorAsignado);
                            $('#NombreCobradorAsignado').val(res[0].NombreCobradorAsignado);
                            $('#Codigo').val(res[0].CodClteApls);

                            $('#NombreApellidoC').val(res[0].NombreApellido);
                            $('#CedulaoRNCC').val(res[0].CedulaCliente);
                            $('#DireccionCobroC').val(res[0].DireccionCobro);
                            $('#Telefono').val(res[0].Telefono);
                            $('#Celular').val(res[0].Celular);

                            $('#CodigoC').val(res[0].Codigo);
                            $('#NombreNegocioC').val(res[0].NombreNegocio);



                            $('#NombreApellidoC').attr('ReadOnly', true);
                            $('#CedulaoRNCC').attr('ReadOnly', true);
                            $('#DireccionCobroC').attr('ReadOnly', true);
                            $('#Telefono').attr('ReadOnly', true);
                            $('#Celular').attr('ReadOnly', true);
                            $('#CodigoC').attr('ReadOnly', true);
                            $('#NombreNegocioC').attr('ReadOnly', true);

                            $('#Contrato').attr('ReadOnly', true);
                            $('#Cedula').attr('ReadOnly', true);
                            $('#NombreApellido').attr('ReadOnly', true);
                            $('#MontoPrestamo').attr('ReadOnly', true);
                            $('#Cuota').attr('Disabled', 'Disabled');
                            $('#codigoCobradorAsignado').attr('ReadOnly', true);
                            $('#ValorOtros').attr('ReadOnly', true);
                            $('#TasaInteres').attr('ReadOnly', true);
                            $('#TasaMora').attr('ReadOnly', true);
                            $('#NombreCobrador').attr('ReadOnly', true);
                            $('#CuotasTraspPtm').attr('ReadOnly', true);

                            $('#Normal').attr('ReadOnly', true);
                            $('#Vencimiento').attr('ReadOnly', true);

                            $('#boton1').attr('Disabled', 'Disabled');
                            $('#boton2').attr('Disabled', 'Disabled');
                            $('#boton3').attr('Disabled', 'Disabled');
                            $('#botonnuevo').attr('Disabled', 'Disabled');
                            $('#NotaPtm').attr('ReadOnly', true);


                            $('#Registrar').attr('Disabled', 'Disabled');
                            $('#Actualizar').attr('Disabled', false);


                            var url = '@Url.Action("ConsultaLoadCuotas", "PrestamosComp")' + '?Monto=' + res[0].MontoPrestamo;
                            $("#tblCuotas").dataTable().fnDestroy();
                            var table = $('#tblCuotas').DataTable({
                                "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                                responsive: true,
                                lengthChange: false,
                                searching: false,
                                info: false,
                                bSort: false,
                                orderable: false,
                                ajax: {
                                    url: url,
                                    type: 'GET',
                                },
                                'columns': [
                                   {
                                       data: "Cuota",
                                       "searchable": true,
                                       className: "dt-body-center",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "ZZZ") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }

                                           }
                                           return data;
                                       },
                                       className: "text-center"
                                   },
                                   {
                                       data: "FechaVencCuota",
                                       "searchable": true,
                                       className: "dt-body-center",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "01/01/2000") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       data: "Saldo",
                                       "searchable": false,
                                       className: "text-right"
                                   },
                                    {
                                        data: "ValorCuota",
                                        name: "ValorCuota",
                                        "searchable": false,
                                        render: function (data, type, row) {
                                            if (type === 'display') {
                                                if (data === "0") {
                                                    return "";
                                                }
                                                else {
                                                    return data;
                                                }
                                            }
                                            return data;
                                        },
                                        className: "text-right"
                                    },
                                   {
                                       type: 'text',
                                       data: "Capital",
                                       name: "CuotaCapital",
                                       "searchable": false,
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       },
                                       className: "text-right"
                                   },
                                   {
                                       type: 'text',
                                       data: "Interes",
                                       name: "CuotaIntereses",
                                       "searchable": false,
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       },
                                       className: "text-right"
                                   },

                                   {
                                       type: 'text',
                                       data: "Otros",
                                       name: "CuotaOtros",
                                       "searchable": false,
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       },
                                       className: "text-right"
                                   },


                                ],
                                "deferRender": true
                            });

                            var url1 = '@Url.Action("ConsultaLoadMovimientos", "PrestamosComp")' + '?Monto=' + res[0].MontoPrestamo;
                            $("#tblMovimientos").dataTable().fnDestroy();
                            var table = $('#tblMovimientos').DataTable({
                                "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                                responsive: true,
                                lengthChange: false,
                                searching: false,
                                info: false,
                                orderable: false,
                                ajax: {
                                    url: url1,
                                    type: 'GET',
                                },
                                'columns': [
                                   {
                                       data: "Fecha",
                                       "searchable": true,
                                       className: "dt-body-center",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "01/01/2000") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       data: "Documento",
                                       "searchable": true,
                                       className: "dt-body-center"//,

                                   },
                                   {
                                       type: 'text',
                                       edit: true,
                                       data: "Movimiento",
                                       "searchable": false,
                                       className: "dt-right"
                                   },
                                    {
                                        type: 'text',
                                        data: "Capital",
                                        name: "Capital",
                                        "searchable": false,
                                        className: "dt-right",
                                        render: function (data, type, row) {
                                            if (type === 'display') {
                                                if (data === "0") {
                                                    return "";
                                                }
                                                else {
                                                    return data;
                                                }
                                            }
                                            return data;
                                        }
                                    },
                                   {
                                       type: 'text',
                                       data: "Interes",
                                       name: "Interes",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       type: 'text',
                                       data: "Otros",
                                       name: "Otros",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },

                                   {
                                       type: 'text',
                                       data: "Mora",
                                       name: "Mora",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       type: 'text',
                                       data: "Total",
                                       name: "Total",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },

                                ],
                                "deferRender": true
                            });


                            var url2 = '@Url.Action("ConsultaLoadCuotasVencidas", "PrestamosComp")' + '?FechaConsulta=' + res[0].FechaConsulta;
                            $("#tblCuotasVencidas").dataTable().fnDestroy();
                            var table = $('#tblCuotasVencidas').DataTable({
                                "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                                responsive: true,
                                lengthChange: false,
                                searching: false,
                                info: false,
                                orderable: false,
                                ajax: {
                                    url: url2,
                                    type: 'GET',
                                },
                                'columns': [
                                    {
                                        data: "Cuota",
                                        "searchable": true,
                                        className: "dt-body-center"//,

                                    },
                                    {
                                        type: 'text',
                                        data: "Capital",
                                        name: "Capital",
                                        "searchable": false,
                                        className: "dt-right",
                                        render: function (data, type, row) {
                                            if (type === 'display') {
                                                if (data === "0") {
                                                    return "";
                                                }
                                                else {
                                                    return data;
                                                }
                                            }
                                            return data;
                                        }
                                    },
                                   {
                                       type: 'text',
                                       data: "Interes",
                                       name: "Interes",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       type: 'text',
                                       data: "Otros",
                                       name: "Otros",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       type: 'text',
                                       data: "Total",
                                       name: "Total",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       data: "Fecha",
                                       "searchable": true,
                                       className: "dt-body-center",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "01/01/2000") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },

                                ],
                                "deferRender": true
                            });


                            var url3 = '@Url.Action("ConsultaLoadCalculoMora", "PrestamosComp")';
                            $("#tblCalculoMora").dataTable().fnDestroy();
                            var table = $('#tblCalculoMora').DataTable({
                                "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                                responsive: true,
                                lengthChange: false,
                                searching: false,
                                info: false,
                            
                                ajax: {
                                    url: url3,
                                    type: 'GET',
                                },
                                'columns': [
                                    {
                                        data: "Cuota",
                                        "searchable": true,
                                        orderable: false,
                                        className: "dt-body-center"//,

                                    },
                                    {
                                        data: "Fecha",
                                        "searchable": true,
                                        "orderable": false,
                                        className: "dt-body-center",
                                        render: function (data, type, row) {
                                            if (type === 'display') {
                                                if (data === "01/01/2000") {
                                                    return "";
                                                }
                                                else {
                                                    return data;
                                                }
                                            }
                                            return data;
                                        }
                                    },
                                    {
                                        type: 'text',
                                        data: "Valor",
                                        name: "Valor",
                                        "searchable": false,
                                        className: "dt-right",
                                        render: function (data, type, row) {
                                            if (type === 'display') {
                                                if (data === "0") {
                                                    return "";
                                                }
                                                else {
                                                    return data;
                                                }
                                            }
                                            return data;
                                        }
                                    },
                                   {
                                       type: 'text',
                                       data: "Dias",
                                       name: "Dias",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       type: 'text',
                                       data: "Calculo",
                                       name: "Calculo",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },
                                   {
                                       type: 'text',
                                       data: "TasaAnual",
                                       name: "TasaAnual",
                                       "searchable": false,
                                       className: "dt-right",
                                       render: function (data, type, row) {
                                           if (type === 'display') {
                                               if (data === "0") {
                                                   return "";
                                               }
                                               else {
                                                   return data;
                                               }
                                           }
                                           return data;
                                       }
                                   },


                                ],
                                "deferRender": true
                            });

                        });
                    },
                    error: function (ex) {
                        alert('Failed.' + ex);
                    }
                });

                //$("#ModalPrestamo").modal('hide');
                
                $('#CerrarModal').click();
            });

            $("#boton2").on("click", function () {

                jQuery.noConflict();
                $("#ModalPrestamo").modal('show');
            });

        });
    function DebloqueaFecha() {

        $('#FechaConsulta').attr('ReadOnly', false);
    }



    $('#FechaConsulta').blur(function () {
        var f = new Date();
        var g
        var FechaConsulta = $('#FechaConsulta').val();
        $('#FechaConsulta').attr('ReadOnly', true);
        var regexDateValidator = function (FechaConsulta) {
        return (FechaConsulta).match(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/);
            }
                accept = regexDateValidator($(this).val());
                if (!accept) 
                {
                    $(this).val(f.getDate() + "/" + ('0' + (f.getMonth() + 1)).slice(-2) + "/" + f.getFullYear());
                    return;
                }

        $('#NoPrestamo').focus();
        //var FechaConsulta = $('#FechaConsulta').val();
        
       
        //var dato1 = $(this).find('td:nth-child(1)').html();
        //$('#NoPrestamo').val(dato1.trim());
        //NoPrestamo = dato1.trim();
      
        $.ajax({
            type: 'POST',
            url: '@Url.Action("ActualizaInfoConsultaContrato")',
            dataType: 'json',
            data: { Contrato: NoPrestamo, FechaConsulta: FechaConsulta },
            success: function (data) {


                var url = '@Url.Action("ConsultaLoadCuotas", "PrestamosComp")' + '?Monto=' + $('#MontoPrestamo').val();
                $("#tblCuotas").dataTable().fnDestroy();
                var table = $('#tblCuotas').DataTable({
                    "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                    responsive: true,
                    lengthChange: false,
                    searching: false,
                    info: false,
                    bSort: false,
                    ajax: {
                        url: url,
                        type: 'GET',
                    },
                    'columns': [
                       {
                           data: "Cuota",
                           "searchable": true,
                           className: "dt-body-center",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "ZZZ") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }

                               }
                               return data;
                           },
                           className: "text-center"
                       },
                       {
                           data: "FechaVencCuota",
                           "searchable": true,
                           className: "dt-body-center",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "01/01/2000") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           data: "Saldo",
                           "searchable": false,
                           className: "text-right"
                       },
                        {
                            data: "ValorCuota",
                            name: "ValorCuota",
                            "searchable": false,
                            render: function (data, type, row) {
                                if (type === 'display') {
                                    if (data === "0") {
                                        return "";
                                    }
                                    else {
                                        return data;
                                    }
                                }
                                return data;
                            },
                            className: "text-right"
                        },
                       {
                           type: 'text',
                           data: "Capital",
                           name: "CuotaCapital",
                           "searchable": false,
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           },
                           className: "text-right"
                       },
                       {
                           type: 'text',
                           data: "Interes",
                           name: "CuotaIntereses",
                           "searchable": false,
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           },
                           className: "text-right"
                       },

                       {
                           type: 'text',
                           data: "Otros",
                           name: "CuotaOtros",
                           "searchable": false,
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           },
                           className: "text-right"
                       },


                    ],
                    "deferRender": true
                });

                var url1 = '@Url.Action("ConsultaLoadMovimientos", "PrestamosComp")' + '?Monto=' + $('#MontoPrestamo').val();
                $("#tblMovimientos").dataTable().fnDestroy();
                var table = $('#tblMovimientos').DataTable({
                    "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                    responsive: true,
                    lengthChange: false,
                    searching: false,
                    info: false,
                    ajax: {
                        url: url1,
                        type: 'GET',
                    },
                    'columns': [
                       {
                           data: "Fecha",
                           "searchable": true,
                           className: "dt-body-center",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "01/01/2000") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           data: "Documento",
                           "searchable": true,
                           className: "dt-body-center"//,

                       },
                       {
                           type: 'text',
                           edit: true,
                           data: "Movimiento",
                           "searchable": false,
                           className: "dt-right"
                       },
                        {
                            type: 'text',
                            data: "Capital",
                            name: "Capital",
                            "searchable": false,
                            className: "dt-right",
                            render: function (data, type, row) {
                                if (type === 'display') {
                                    if (data === "0") {
                                        return "";
                                    }
                                    else {
                                        return data;
                                    }
                                }
                                return data;
                            }
                        },
                       {
                           type: 'text',
                           data: "Interes",
                           name: "Interes",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           type: 'text',
                           data: "Otros",
                           name: "Otros",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },

                       {
                           type: 'text',
                           data: "Mora",
                           name: "Mora",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           type: 'text',
                           data: "Total",
                           name: "Total",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },

                    ],
                    "deferRender": true
                });


                var url2 = '@Url.Action("ConsultaLoadCuotasVencidas", "PrestamosComp")' + '?FechaConsulta=' + FechaConsulta;
                $("#tblCuotasVencidas").dataTable().fnDestroy();
                var table = $('#tblCuotasVencidas').DataTable({
                    "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                    responsive: true,
                    lengthChange: false,
                    searching: false,
                    info: false,
                    ajax: {
                        url: url2,
                        type: 'GET',
                    },
                    'columns': [
                        {
                            data: "Cuota",
                            "searchable": true,
                            className: "dt-body-center"//,

                        },
                        {
                            type: 'text',
                            data: "Capital",
                            name: "Capital",
                            "searchable": false,
                            className: "dt-right",
                            render: function (data, type, row) {
                                if (type === 'display') {
                                    if (data === "0") {
                                        return "";
                                    }
                                    else {
                                        return data;
                                    }
                                }
                                return data;
                            }
                        },
                       {
                           type: 'text',
                           data: "Interes",
                           name: "Interes",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           type: 'text',
                           data: "Otros",
                           name: "Otros",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           type: 'text',
                           data: "Total",
                           name: "Total",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           data: "Fecha",
                           "searchable": true,
                           className: "dt-body-center",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "01/01/2000") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },

                    ],
                    "deferRender": true
                });


                var url3 = '@Url.Action("ConsultaLoadCalculoMora", "PrestamosComp")';
                $("#tblCalculoMora").dataTable().fnDestroy();
                var table = $('#tblCalculoMora').DataTable({
                    "language": { "url": "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json" },
                    responsive: true,
                    lengthChange: false,
                    searching: false,
                    info: false,
                    ajax: {
                        url: url3,
                        type: 'GET',
                    },
                    'columns': [
                        {
                            data: "Cuota",
                            "searchable": true,
                            className: "dt-body-center"//,

                        },
                        {
                            data: "Fecha",
                            "searchable": true,
                            className: "dt-body-center",
                            render: function (data, type, row) {
                                if (type === 'display') {
                                    if (data === "01/01/2000") {
                                        return "";
                                    }
                                    else {
                                        return data;
                                    }
                                }
                                return data;
                            }
                        },
                        {
                            type: 'text',
                            data: "Valor",
                            name: "Valor",
                            "searchable": false,
                            className: "dt-right",
                            render: function (data, type, row) {
                                if (type === 'display') {
                                    if (data === "0") {
                                        return "";
                                    }
                                    else {
                                        return data;
                                    }
                                }
                                return data;
                            }
                        },
                       {
                           type: 'text',
                           data: "Dias",
                           name: "Dias",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           type: 'text',
                           data: "Calculo",
                           name: "Calculo",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },
                       {
                           type: 'text',
                           data: "TasaAnual",
                           name: "TasaAnual",
                           "searchable": false,
                           className: "dt-right",
                           render: function (data, type, row) {
                               if (type === 'display') {
                                   if (data === "0") {
                                       return "";
                                   }
                                   else {
                                       return data;
                                   }
                               }
                               return data;
                           }
                       },


                    ],
                    "deferRender": true
                });
            },
            error: function (ex) {
                alert('Failed.' + ex);
            }
        });
    });
</script>
